# 미로
`Items.Weird_Substance`는 식물을 [비료 주기](docs/unlocks/fertilizer.md)하여 얻을 수 있으며, 덤불에 이상한 효과를 줍니다. 드론이 덤불 위에 있을 때 `use_item(Items.Weird_Substance, amount)`를 호출하면 덤불이 살아있는 미로로 변화합니다. 미로의 크기는 사용한 `Items.Weird_Substance`의 양(즉, `use_item()` 호출의 두 번째 인자)에 따라 결정됩니다.
미로 업그레이드가 없으면, `n`개의 `Items.Weird_Substance`를 사용해 `n`x`n` 미로가 만들어집니다. 각 미로 업그레이드 레벨은 보물을 두 배로 늘리지만, 필요한 `Items.Weird_Substance`의 양도 두 배로 증가합니다. 그래서 완전한 필드 미로를 만들려면:

`plant(Entities.Bush)
n_substance = get_world_size() * 2**(num_unlocked(Unlocks.Mazes) - 1)
use_item(Items.Weird_Substance, n_substance)`

어떤 이유로 드론은 울타리 위를 날 수 없습니다. 울타리가 높아 보이지 않는데도 불구하고 말이죠.

울타리 어딘가에는 보물이 숨겨져 있습니다. `harvest()`를 사용하여 보물을 수확하면 미로의 면적만큼 골드를 얻을 수 있습니다. (예를 들어 5x5 미로는 25 골드를 제공합니다.)

다른 곳에서 `harvest()`를 사용하면 미로는 단순히 사라집니다.

`get_entity_type()`은 드론이 보물 위에 있을 때 `Entities.Treasure`와 같고, 미로의 다른 곳에서는 `Entities.Hedge`와 같습니다.

미로는 다시 사용하지 않는 한 어떤 루프도 포함되지 않습니다(아래를 참조하여 미로를 재사용하는 방법을 확인하세요). 따라서 드론이 뒤로 돌아가지 않고 동일한 위치에 다시 도착할 방법이 없습니다.

벽이 있는지 확인하려면 거기를 통과하려고 시도해 보세요.
`move()`는 성공 시 `True`를 반환하고 그렇지 않으면 `False`를 반환합니다.

보물을 찾는 방법을 전혀 모르겠다면 힌트 1을 확인하세요. 이런 문제를 어떻게 접근해야 할지 보여줍니다.

추가 도전 과제로 같은 양의 `Items.Weird_Substance`를 보물에 다시 사용하여 미로를 재사용할 수 있습니다.
이렇게 하면 보물에 있는 골드의 양이 완전한 미로만큼 증가하고, 보물은 미로 안의 임의의 위치로 이동합니다.

보물에 `measure()`을 사용하면 이동할 위치를 튜플로 반환받습니다.
`next_x, next_y = measure()`

보물이 이동할 때마다 미로의 무작위 벽 하나가 제거될 수 있습니다. 따라서 재사용된 미로에는 루프가 포함될 수 있습니다.

미로 안의 루프는 같은 위치에 다시 도달할 수 없도록 하기 때문에 상당히 어렵습니다.
미로를 재사용하는 것이 새로운 미로를 수확하고 생성하는 것보다 더 많은 골드를 제공하지는 않습니다.
이것은 당신이 건너뛸 수 있는 100% 추가 도전일 뿐입니다.
추가 정보와 지름길이 문제를 더 빨리 푸는 데 도움을 줄 때만 가치가 있습니다.

같은 미로는 최대 300번까지만 해결할 수 있습니다. 이는 299번 재배치에 해당합니다. 그 후에는 보물에 이상한 물질을 사용해도 더 이상 골드가 증가하지 않으며 `measure()`는 `None`를 반환합니다.

<spoiler=힌트 1 보기>문제를 해결하는 일반적인 접근 방식은 다음과 같습니다:

미로를 만들고 당신이 드론이라고 상상해보세요.

미로 안에 있다면 보물을 어떻게 찾을지 생각해보세요.

다른 사람이 아무 생각 없이 따라 할 수 있도록 당신의 전략을 단계별로 적어보세요. 

이제 이렇게 적은 단계를 코드로 옮기는 시도를 해보세요.
</spoiler>
<spoiler=힌트 2 보기>루프가 없는 한: 벽은 거의 하나의 큰 연결된 벽일 뿐입니다. 벽을 따라가다 보면 전체 미로를 통과하게 됩니다.
이 방법은 코드가 거의 필요 없이 약 10줄로 해결할 수 있으며, 이미 지나간 곳을 추적할 필요도 없습니다.</spoiler>
<spoiler=힌트 3 보기>동, 서와 같은 절대 방향으로 드론을 움직이는 대신 "오른쪽으로 돌기"나 "왼쪽으로 돌기" 같은 상대적인 방향으로 드론을 움직이는 것이 매우 유용할 수 있습니다. 이를 위해 드론이 현재 어느 방향으로 움직이고 있는지 추적해야 합니다. 드론은 실제로 회전하지 않지만 코드에서는 "가상" 회전을 유지할 수 있습니다.
다음의 인덱스 트릭이 도움이 될 것입니다:

`directions = [North, East, South, West]
index = 0`

`% 4`를 사용하여 원을 "회전"할 수 있게 하여 `West` 다음에는 `North`로 되돌아가게 할 수 있습니다.
`# 오른쪽 회전
index = (index + 1) % 4`

`# 왼쪽 회전
index = (index - 1) % 4

move(directions[index])`</spoiler>
<spoiler=힌트 4 보기>만약 풀 수 없다면, 당신은 항상 삶을 쉽게 만들 수 있고 덜 효율적으로 할 수 있습니다.
`1`x`1` 미로를 푸는 것은 아주 간단합니다.</spoiler>