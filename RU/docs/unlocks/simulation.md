# Симуляция

Симуляции позволяют быстро тестировать код без изменения состояния настоящей фермы.
Начальное состояние симуляции можно выбирать свободно, и когда симуляция закончится, настоящая ферма будет в том же состоянии, в котором она была до начала симуляции.

Функция `simulate()` используется для запуска симуляции.

файл, с которого должно начаться выполнение
`filename = "f1"`

начать со всем открытым и полностью улучшенным
`sim_unlocks = Unlocks`

начать с 10000 моркови и 50 сена
`sim_items = {Items.Carrot : 10000, Items.Hay : 50}`

начать с глобальной переменной "a" со значением 13
`sim_globals = {"a" : 13}`

использовать фиксированный random seed
`seed = 0`

ускорить симуляцию в 64 раза
`speedup = 64`

запустить симуляцию
`run_time = simulate(filename, sim_unlocks, sim_items, sim_globals, seed, speedup)`

Функция `simulate()` возвращает время в секундах, которое потребовалось для симуляции данного стартового файла.

### Имя файла
Первый аргумент функции simulate — это имя файла. Это имя, которое отображается в верхней части окна с кодом. Симуляция запустит указанный файл, как если бы вы нажали на нём кнопку «Выполнить».

### Начальные улучшения
Все программные возможности, такие как циклы, операторы if, списки (list), словари (dict),... всегда останутся разблокированными. 

Второй аргумент позволяет указать, с какими улучшениями/апгрейдами должна начаться симуляция в дополнение к программным возможностям. Это должна быть последовательность улучшений. Симуляция начнётся со всеми улучшениями в последовательности, прокачанными до максимального уровня.

Если вы хотите указать уровень улучшения, отличный от максимального, вы можете передать dict, который сопоставляет улучшения с уровнями улучшений. В этом случае отрицательные значения соответствуют максимальному уровню улучшения.

### Начальные предметы
Третий аргумент позволяет передать dict, который сопоставляет предметы с числами. Он указывает предметы, с которыми начнётся симуляция.

### Начальные глобальные переменные
Поскольку симуляция запускает совершенно новое выполнение программы, вы не можете получить доступ к переменным из программы, которая запускает симуляцию.
Однако можно передавать значения в симуляцию, используя четвёртый аргумент. Это dict, который сопоставляет имена переменных в виде строк со значениями. Эти переменные затем добавляются в глобальный scope выполнения внутри симуляции.

Обратите внимание, что это копирует все значения, поэтому их изменение внутри симуляции не повлияет на исходные значения вне симуляции. Невозможно вернуть значения из симуляции, кроме времени, которое потребовалось для её выполнения.

### Random Seed
Пятый аргумент позволяет указать random seed, используемый в симуляции. Это должно быть положительное целое число. Отрицательные значения приведут к использованию случайного seed.

Random seed влияет на всё, от времени роста растений до макетов лабиринтов и времени высыхания воды. Если вы запускаете одну и ту же симуляцию несколько раз с одним и тем же random seed и одинаковыми начальными условиями, результат всегда должен быть одинаковым.

### Ускорение
Шестой аргумент — это начальное ускорение симуляции. Это позволяет быстро тестировать вещи. Если игра не сможет поддерживать установленную скорость, она автоматически замедлится.

Ускорение никак не влияет на результат симуляции. Оно существует только для сокращения времени ожидания.