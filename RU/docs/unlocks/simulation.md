# Симуляция

Симуляции позволяют быстро тестировать код, не изменяя состояние настоящей фермы.
Начальное состояние симуляции можно выбрать произвольно, и когда симуляция закончится, настоящая ферма будет в том же состоянии, в каком была до начала симуляции.

Функция `simulate()` используется для запуска симуляции.

файл, с которого должно начаться выполнение
`filename = "f1"`

начать со всеми разблокированными и полностью улучшенными технологиями
`sim_unlocks = Unlocks`

начать с 10000 моркови и 50 сена
`sim_items = {Items.Carrot : 10000, Items.Hay : 50}`

начать с глобальной переменной "a" со значением 13
`sim_globals = {"a" : 13}`

использовать фиксированное случайное зерно
`seed = 0`

ускорить симуляцию в 64 раза
`speedup = 64`

запустить симуляцию
`run_time = simulate(filename, sim_unlocks, sim_items, sim_globals, seed, speedup)`

Функция `simulate()` возвращает время в секундах, которое потребовалось для симуляции данного стартового файла.

### Имя файла
Первый аргумент функции simulate — это имя файла. Это имя, которое отображается в верхней части окна с кодом. Симуляция запустит указанный файл так, как если бы вы нажали на нём кнопку «Выполнить».

### Стартовые технологии
Все возможности программирования, такие как циклы, операторы if, списки, словари... всегда остаются разблокированными. 

Второй аргумент позволяет указать, с какими технологиями/улучшениями должна начинаться симуляция в дополнение к возможностям программирования. Это должна быть последовательность технологий. Симуляция начнётся со всеми технологиями из последовательности, улучшенными до максимального уровня.

Если вы хотите указать уровень улучшения, отличный от максимального, вы можете передать словарь, который сопоставляет технологии с уровнями. В этом случае отрицательные значения соответствуют максимальному уровню.

### Стартовые предметы
Третий аргумент позволяет передать словарь, который сопоставляет предметы с числами. Он указывает предметы, с которыми начнётся симуляция.

### Стартовые глобальные переменные
Поскольку симуляция запускает совершенно новое выполнение программы, вы не можете получить доступ к переменным из программы, которая запускает симуляцию.
Однако можно передать значения в симуляцию с помощью четвёртого аргумента. Это словарь, который сопоставляет имена переменных в виде строк со значениями. Эти переменные затем добавляются в глобальную область видимости выполнения внутри симуляции.

Обратите внимание, что это копирует все значения, поэтому их изменение внутри симуляции не повлияет на исходные значения вне симуляции. Невозможно вернуть значения из симуляции, кроме времени, которое потребовалось для её выполнения.

### Случайное зерно
Пятый аргумент позволяет указать случайное зерно, используемое в симуляции. Это должно быть положительное целое число. Отрицательные значения приведут к использованию случайного зерна.

Случайное зерно влияет на всё: от времени роста растений до расположения лабиринтов и времени высыхания воды. Если вы запускаете одну и ту же симуляцию несколько раз с одним и тем же случайным зерном и одинаковыми начальными условиями, результат всегда должен быть одинаковым.

### Ускорение
Шестой аргумент — это начальное ускорение симуляции. Это позволяет быстро тестировать вещи. Если игра не сможет поддерживать заданную скорость, она автоматически замедлится.

Ускорение никак не влияет на результат симуляции. Оно существует только для сокращения времени ожидания.