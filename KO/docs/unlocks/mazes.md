# 미로
식물에 [비료를 주어](docs/unlocks/fertilizer.md) 얻는 `Items.Weird_Substance`는 덤불에 이상한 효과를 줍니다. 드론이 덤불 위에 있을 때 `use_item(Items.Weird_Substance, amount)`를 호출하면 덤불이 울타리 미로로 자라납니다.
미로의 크기는 사용된 `Items.Weird_Substance`의 양(`use_item()` 호출의 두 번째 인자)에 따라 달라집니다.
미로 업그레이드 없이는 `n`개의 `Items.Weird_Substance`를 사용하면 `n`x`n` 크기의 미로가 생깁니다. 각 미로 업그레이드 레벨은 보물을 두 배로 만들지만, 필요한 `Items.Weird_Substance`의 양도 두 배로 늘립니다.
따라서 밭 전체 크기의 미로를 만들려면:

`plant(Entities.Bush)
substance = get_world_size() * 2**(num_unlocked(Unlocks.Mazes) - 1)
use_item(Items.Weird_Substance, substance)`


왠지 모르게 드론은 울타리가 그렇게 높아 보이지 않는데도 그 위를 날 수 없습니다.

울타리 어딘가에 보물이 숨겨져 있습니다. 보물에 `harvest()`를 사용하면 미로의 면적과 같은 양의 금을 받습니다. (예를 들어, 5x5 미로는 25개의 금을 줍니다.)

다른 곳에서 `harvest()`를 사용하면 미로는 그냥 사라집니다.

`get_entity_type()`는 드론이 보물 위에 있으면 `Entities.Treasure`와 같고, 미로의 다른 모든 곳에서는 `Entities.Hedge`와 같습니다.

미로를 재사용하지 않는 한(미로 재사용 방법은 아래 참조) 미로에는 루프가 없습니다. 따라서 드론이 되돌아가지 않고 같은 위치에 다시 도달할 방법은 없습니다.

벽을 통과하려고 시도하여 벽이 있는지 확인할 수 있습니다.
`move()`는 성공하면 `True`를, 그렇지 않으면 `False`를 반환합니다.

`can_move()`를 사용하면 움직이지 않고 벽이 있는지 확인할 수 있습니다.

보물에 도달하는 방법을 모르겠다면, 힌트 1을 보세요. 이런 문제에 어떻게 접근하는지 보여줍니다.

미로 안 어디에서든 `measure()`를 사용하면 보물의 위치를 반환합니다.
`x, y = measure()`

추가 도전을 위해, 보물에 같은 양의 `Items.Weird_Substance`를 다시 사용하여 미로를 재사용할 수도 있습니다.
이렇게 하면 보물에 있는 금의 양이 미로 하나만큼 증가하고, 보물이 미로 안의 무작위 위치로 이동합니다.

보물이 이동할 때마다 미로에서 무작위 벽이 제거될 수 있습니다. 그래서 재사용된 미로에는 루프가 포함될 수 있습니다.

미로에 루프가 있으면 되돌아가지 않고도 같은 위치에 다시 도달할 수 있다는 의미이므로 훨씬 더 어려워진다는 점에 유의하세요.
미로를 재사용하는 것이 단순히 수확하고 새로운 미로를 생성하는 것보다 더 많은 금을 주지는 않습니다.
이것은 그냥 건너뛸 수 있는 100% 추가 도전 과제입니다.
추가 정보와 지름길이 미로를 더 빨리 해결하는 데 도움이 될 때만 가치가 있습니다.

같은 미로는 최대 300번까지 해결할 수 있습니다. 이는 299번의 재배치에 해당합니다. 그 이후에는 보물에 이상한 물질을 사용해도 금이 더 이상 증가하지 않으며, `measure()`는 `None`을 반환합니다.

<spoiler=힌트 1 보기>문제 해결을 위한 일반적인 접근 방식은 다음과 같습니다:

미로를 만들고 자신이 드론이라고 상상해보세요.

미로 안에 있다면 보물을 어떻게 찾을지 생각해보세요.

다른 사람이 생각 없이 따라할 수 있도록 여러분의 전략을 단계별로 적어보세요.

이제 여러분의 단계를 코드로 번역해보세요.
</spoiler>
<spoiler=힌트 2 보기>루프가 없는 한: 모든 벽은 실제로는 하나의 거대하고 연결된 벽입니다. 벽을 따라가면 전체 미로를 통과하게 됩니다.
이 접근 방식은 코드가 거의 필요 없으며, 이미 방문한 곳을 추적할 필요도 없습니다. 10줄 정도의 코드면 충분합니다.</spoiler>
<spoiler=힌트 3 보기>드론을 동쪽이나 서쪽 같은 절대적인 방향으로 움직이는 대신, "오른쪽으로 돌기"나 "왼쪽으로 돌기" 같은 상대적인 방향으로 움직이는 것이 매우 유용할 수 있습니다. 이를 위해서는 드론이 현재 어느 방향으로 움직이고 있는지 추적해야 합니다. 드론은 실제로 회전하지 않지만, 코드에서 "가상" 회전을 유지할 수 있습니다.
다음 인덱스 트릭이 이에 도움이 됩니다:

`directions = [North, East, South, West]
index = 0`

`% 4`를 사용하면 "원을 따라" 회전할 수 있어, `West` 다음에 다시 `North`로 돌아오게 됩니다.
`# 오른쪽으로 돌기
index = (index + 1) % 4`

`# 왼쪽으로 돌기
index = (index - 1) % 4

move(directions[index])`</spoiler>
<spoiler=힌트 4 보기>해결할 수 없다면, 언제나 덜 효율적인 방법으로 편하게 할 수도 있습니다.
`1`x`1` 미로를 해결하는 것은 아주 쉽습니다.</spoiler>