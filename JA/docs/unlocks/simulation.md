# シミュレーション

シミュレーションを使うと、実際の農場の状態を変えずにコードを素早くテストできます。
シミュレーションの開始状態は自由に選べ、シミュレーションが終了すると、実際の農場はシミュレーション開始前と全く同じ状態に戻ります。

`simulate()`関数はシミュレーションを開始するために使います。

実行を開始するファイル
`filename = "f1"`

すべてをアンロックし、完全にアップグレードした状態で開始
`sim_unlocks = Unlocks`

ニンジン10000個と干し草50個で開始
`sim_items = {Items.Carrot : 10000, Items.Hay : 50}`

値13のグローバル変数「a」で開始
`sim_globals = {"a" : 13}`

固定のランダムシードを使用
`seed = 0`

シミュレーションを64倍にスピードアップ
`speedup = 64`

シミュレーションを実行
`run_time = simulate(filename, sim_unlocks, sim_items, sim_globals, seed, speedup)`

`simulate()`関数は、指定された開始ファイルをシミュレートするのにかかった時間を秒単位で返します。

### ファイル名
simulate関数の最初の引数はファイル名です。これはコードウィンドウの上部に表示される名前です。シミュレーションは、指定されたファイルで実行ボタンをクリックしたかのように実行されます。

### 開始時のアンロック
ループ、if文、list、dictなどのすべてのプログラミング機能は、常にアンロックされたままです。

2番目の引数では、プログラミング機能に加えて、シミュレーションを開始する際のアンロック/アップグレードを指定できます。これはアンロックのシーケンスである必要があります。シミュレーションは、シーケンス内のすべてのアンロックが最大レベルにアップグレードされた状態で開始されます。

最大以外のアップグレードレベルを指定したい場合は、アンロックをアンロックレベルに対応付けるdictionaryを渡すことができます。この場合、負の値は最大のアンロックレベルに対応します。

### 開始時のアイテム
3番目の引数では、アイテムを数値に対応付けるdictionaryを渡すことができます。これはシミュレーションを開始する際のアイテムを指定します。

### 開始時のグローバル
シミュレーションは完全に新しいプログラム実行を開始するため、シミュレーションを開始するプログラムから変数にアクセスすることはできません。
しかし、4番目の引数を使ってシミュレーションに値を渡すことが可能です。これは、文字列形式の変数名を値に対応付けるdictです。これらの変数は、シミュレーション内の実行のグローバルscopeに追加されます。

これはすべての値をコピーするため、シミュレーション内で値を変更しても、シミュレーション外の元の値には影響しません。実行にかかった時間以外にシミュレーションから値を返すことはできません。

### ランダムシード
5番目の引数では、シミュレーションで使用されるランダムシードを指定できます。これは正の整数でなければなりません。負の値を指定すると、ランダムなシードが使用されます。

ランダムシードは、作物の成長時間から迷路のレイアウト、水の減少時間まで、あらゆるものに影響します。同じランダムシードと同じ開始条件で同じシミュレーションを複数回開始した場合、結果は常に同じになるはずです。

### スピードアップ
6番目の引数は、シミュレーションの開始時のスピードアップです。これにより、物事を素早くテストできます。ゲームが設定された速度に追いつけない場合、自動的に速度が低下します。

スピードアップはシミュレーションの結果には一切影響しません。これは待ち時間を短縮するためだけに存在します。