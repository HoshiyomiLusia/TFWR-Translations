# 미로
[비료주기](docs/unlocks/fertilizer.md)를 통해 얻는 `Items.Weird_Substance`는 덤불에 이상한 효과를 줍니다. 드론이 덤불 위에 있을 때 `use_item(Items.Weird_Substance, amount)`를 호출하면 덤불이 산울타리 미로로 자랍니다.
미로의 크기는 사용된 `Items.Weird_Substance`의 양(`use_item()` 호출의 두 번째 인자)에 따라 달라집니다.
미로 업그레이드 없이 `n`개의 `Items.Weird_Substance`를 사용하면 `n`x`n` 크기의 미로가 생깁니다. 각 미로 업그레이드 레벨은 보물을 두 배로 만들지만, 필요한 `Items.Weird_Substance`의 양도 두 배로 만듭니다.
따라서 전체 밭 크기의 미로를 만들려면:

`plant(Entities.Bush)
n_substance = get_world_size() * 2**(num_unlocked(Unlocks.Mazes) - 1)
use_item(Items.Weird_Substance, n_substance)`


어떤 이유에서인지 드론은 그렇게 높아 보이지 않는 산울타리 위를 날 수 없습니다.

산울타리 어딘가에 보물이 숨겨져 있습니다. 보물에 `harvest()`를 사용하여 미로의 면적과 같은 양의 금을 받으세요. (예를 들어, 5x5 미로는 25금을 줍니다.)

다른 곳에서 `harvest()`를 사용하면 미로는 단순히 사라집니다.

`get_entity_type()`은 드론이 보물 위에 있으면 `Entities.Treasure`와 같고, 미로의 다른 모든 곳에서는 `Entities.Hedge`와 같습니다.

미로는 재사용하지 않는 한 루프를 포함하지 않습니다 (미로 재사용 방법은 아래 참조). 따라서 드론이 되돌아가지 않고 같은 위치에 다시 도달할 방법은 없습니다.

벽을 통과하려고 시도하여 벽이 있는지 확인할 수 있습니다.
`move()`는 성공하면 `True`를, 그렇지 않으면 `False`를 반환합니다.

보물에 도달하는 방법을 모르겠다면 힌트 1을 살펴보세요. 이런 문제를 어떻게 접근해야 하는지 보여줍니다.


추가적인 도전을 위해, 보물에 같은 양의 `Items.Weird_Substance`를 다시 사용하여 미로를 재사용할 수도 있습니다.
이렇게 하면 보물에 있는 금의 양이 전체 미로 하나만큼 증가하고 미로의 무작위 위치로 이동합니다.

보물에 `measure()`를 사용하면 이동할 위치를 튜플로 반환합니다.
`next_x, next_y = measure()`

보물이 이동할 때마다 미로에서 무작위 벽이 제거될 수 있습니다. 따라서 재사용된 미로는 루프를 포함할 수 있습니다.

미로에 루프가 있으면 되돌아가지 않고도 같은 위치에 다시 도달할 수 있다는 것을 의미하므로 훨씬 더 어려워진다는 점에 유의하세요.
미로를 재사용해도 새로운 미로를 수확하고 생성하는 것보다 더 많은 금을 주지는 않습니다.
이것은 100% 추가적인 도전 과제이며 그냥 건너뛸 수 있습니다.
추가 정보와 지름길이 미로를 더 빨리 해결하는 데 도움이 될 경우에만 가치가 있습니다.

같은 미로는 최대 300번까지 해결할 수 있습니다. 이것은 299번의 재배치에 해당합니다. 그 후에는 보물에 기묘한 물질을 사용해도 금이 더 이상 증가하지 않으며 `measure()`는 `None`을 반환합니다.

<spoiler=힌트 1 보기>문제 해결에 대한 일반적인 접근 방식은 다음과 같습니다:

미로를 만들고 자신이 드론이라고 상상해 보세요.

미로 안에 있다면 보물을 어떻게 찾을지 생각해 보세요.

다른 사람이 생각 없이 따를 수 있도록 전략을 단계별로 적어보세요.

이제 자신의 단계를 코드로 번역해 보세요.
</spoiler>
<spoiler=힌트 2 보기>루프가 없는 한: 모든 벽은 사실상 하나의 거대한 연결된 벽입니다. 벽을 따라가면 전체 미로를 통과하게 됩니다.
이 접근 방식은 코드가 거의 필요 없으며 어디를 이미 다녀왔는지 추적할 필요가 없습니다. 약 10줄의 코드면 충분합니다.</spoiler>
<spoiler=힌트 3 보기>드론을 동쪽이나 서쪽 같은 절대적인 방향으로 움직이는 대신, "오른쪽으로 돌기"나 "왼쪽으로 돌기" 같은 상대적인 방향으로 움직이는 것이 매우 유용할 수 있습니다. 이를 위해서는 드론이 현재 어느 방향으로 움직이고 있는지 추적해야 합니다. 드론은 실제로 회전하지 않지만, 코드에서 "가상" 회전을 유지할 수 있습니다.
다음 인덱스 트릭이 이에 도움이 됩니다:

`directions = [North, East, South, West]
index = 0`

`% 4`를 사용하여 `West` 다음에는 다시 `North`로 돌아오도록 "원을 따라" 회전할 수 있습니다.
`# 오른쪽으로 돌기
index = (index + 1) % 4`

`# 왼쪽으로 돌기
index = (index - 1) % 4

move(directions[index])`</spoiler>
<spoiler=힌트 4 보기>해결할 수 없다면, 언제나 덜 효율적인 방법으로 쉽게 할 수 있습니다.
`1`x`1` 미로를 해결하는 것은 사소한 일입니다.</spoiler>